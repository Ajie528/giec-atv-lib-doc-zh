---
title: WiFi概述
date: 2025-4-16 11:48:24
permalink: /pages/net/wifi
---
## 模块介绍

### WiFi 介绍

在Android开发过程中，我们可能会使用到WiFi相关的操作，例如开启或关闭WiFi、断开或者连接WiFi、移除WiFi、获取WiFi IP、开启或者关闭WiFi 热点等操作。
本模块对上述功能都做了封装，方便开发者能快速开发应用，提高工作效率。

> 引入 `import com.giec.stb.core.net.wifi.*`

### WifiUtil 使用

 > 注意：由于系统的行为特性，在使用以太网连接设备时，WiFi无法连接。
>
 >但是会显示`已保存`，当断开以太网连接时，会自动连接已保存的WiFi。

```kotlin

// 开启 WiFi
WifiUtil.openWifi(context)

// 关闭 WiFi
WifiUtil.closeWifi(context)

// 断开当前连接的 WiFi
WifiUtil.disconnectCurrentWifi(context)

// 连接有密码的的 WiFi
WifiUtil.connectWifi(context, ssid, password)

// 连接无密码的的 WiFi
WifiUtil.connectWifi(context, ssid)

// 移除已保存的 WiFi
WifiUtil.removeWifi(context, ssid)

// 获取 WiFi IP
WifiUtil.getWifiIp(context)

```

-------------------------------------------------------------------

### WifiHotspotUtil 使用

#### 参数说明
| 参数                   | 名称                    |
|----------------------|-----------------------|
| ssid                 | WiFi 热点的名称            |
| password             | WiFi 热点的密码            |
| band | 频段  1: 2.4GHz，2: 5GHz |
| autoShutdownWhenIdle | 是否在空闲时停止WiFi热点, 默认关闭  |
| hidden               | 是否隐藏SSID, 默认关闭        |


```kotlin

// 开启  2.4G WiFi 热点
WifiHotspotUtil.startTethering(context, ssid, password, band = 1, autoShutdownWhenIdle, hidden)

// 开启 5G WiFi 热点
WifiHotspotUtil.startTethering(context, ssid, password, band = 2, autoShutdownWhenIdle, hidden)

// 关闭 WiFi 热点
WifiHotspotUtil.stopTethering(context)

// 设置是否自动关闭WiFi热点
WifiHotspotUtil.setAutoShutdownEnabled(context, enable)

// 清除所有网络接口，保留eth0和wlan0
WifiHotspotUtil.clearAllNet()

// 将热点设置为Trunk模式
WifiHotspotUtil.setTrunkMode(vlanIface, bridgeIface)

// 将热点设置为桥接模式
WifiHotspotUtil.setBridgeMode()

// 将 STA 模式设置为静态 IP
WifiHotspotUtil.setStaModeToStaticIP(ipCidr, gateway, dns1, dns2)

// 将 STA 模式设置为动态 IP
WifiHotspotUtil.setStaModeForToDynamicIP()
```
#### 例子：
```kotlin
// 1. 清除所有网络接口，保留eth0和wlan0
WifiHotspotUtil.clearAllNet()

// 2. 启动 WiFi 热点
WifiHotspotUtil.startTethering(context, "GIEC", "12345678")

// 3. 等待ap接口完成创建
Thread.sleep(3000)

// 4.设置为 Trunk 模式
WifiHotspotUtil.setTrunkMode("eth0.100", "br-vlan100")
```
-------------------------------------------------------------------